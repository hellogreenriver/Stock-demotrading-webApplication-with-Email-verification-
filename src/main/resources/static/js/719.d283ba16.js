"use strict";(self["webpackChunkvue_template"]=self["webpackChunkvue_template"]||[]).push([[719],{2719:function(t,e,s){s.r(e),s.d(e,{default:function(){return _}});var a=s(6190),o=s(9582),r=s(4886),l=s(266),n=s(2118),i=s(4061),c=s(9223),u=s(1713),g=s(9258),d=s(3687),h=s(7808),f=function(){var t=this,e=t._self._c;return e("div",[e(n.Z,[e(u.Z,{attrs:{align:"center",justify:"space-around"}},[e(l.Z,{attrs:{align:"center"}},[e("h1",{staticClass:"text-center"},[t._v(" "+t._s(t.getSymbol))]),e("h1",{staticClass:"text-center"},[t._v(" "+t._s(this.currentPrice))])]),e(l.Z,{attrs:{align:"center"}},[e(a.Z,{staticClass:"ma-4",attrs:{large:"",depressed:"",color:"error"},on:{click:function(e){return t.sell()}}},[t._v(" SELL ")]),e(a.Z,{staticClass:"ma-4",attrs:{large:"",depressed:"",color:"success"},on:{click:function(e){t.dialog=!0,t.loginCheck()}}},[t._v(" BUY ")])],1)],1),e("highcharts",{ref:"chart",staticClass:"hc",attrs:{"constructor-type":"stockChart",options:t.chartOptions}})],1),e(i.Z,{attrs:{width:"500"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(o.Z,{attrs:{loading:t.isLoading}},[e(r.EB,[t._v(" "+t._s(t.getSymbol)+" ")]),e(n.Z,[e(h.Z,{attrs:{label:"Number of shares",rules:t.rules,"hide-details":"auto"},model:{value:t.numberOfShares,callback:function(e){t.numberOfShares=e},expression:"numberOfShares"}})],1),e(c.Z),e(r.h7,[e(a.Z,{attrs:{color:"primary",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Cancel ")]),e(d.Z),e(a.Z,{attrs:{color:"primary",text:""},on:{click:function(e){return t.buy()}}},[t._v(" Buy ")])],1)],1)],1),e(g.Z,{attrs:{timeout:"-1"},scopedSlots:t._u([{key:"action",fn:function({attrs:s}){return[e(a.Z,t._b({attrs:{color:"pink",text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",s,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.message)+" ")])],1)},p=[],m=s(9669),y=s.n(m),b=s(629),S={data(){return{snackbar:!1,dialog:!1,loaded:!1,errors:"",message:null,numberOfShares:null,currentPrice:null,chartOptions:{rangeSelector:{selected:1},xAxis:{type:"datetime"},title:{text:localStorage.getItem("symbol")},series:[{name:localStorage.getItem("symbol"),data:null,type:"area",threshold:null,tooltip:{valueDecimals:2}}]}}},computed:{getSymbol:function(){return localStorage.getItem("symbol")},user_id:function(){return this.$store.getters.user_id}},created:function(){this.fetchData(),this.getCurrentPrice()},methods:{fetchData(){localStorage.getItem("symbol")?localStorage.getItem("symbol")?y().get("/api/stock/"+localStorage.getItem("symbol")).then((t=>{this.chartOptions.series[0].data=t.data,console.log(t.data),console.log("data"+chartOptions.series[0].data)})).catch((t=>{this.errors=t,console.log(this.errors),this.isLoading=!1})).finally((()=>{})):console.log("error"):y().get("/api/stock/"+this.$store.state.symbol).then((t=>{localStorage.setItem("symbol",this.$store.state.symbol),this.chartOptions.series[0].data=t.data,console.log(t.data),console.log("data"+this.chartOptions.series[0].data)})).catch((t=>{this.errors=t,console.log(this.errors),this.isLoading=!1})).finally((()=>{}))},buy(){this.loginCheck(),y().post("/api/buy/"+this.user_id,{symbol:localStorage.getItem("symbol"),numberOfShares:this.numberOfShares},{headers:{"X-AUTH-TOKEN":"Bearer "+localStorage.getItem("token")}}).then((t=>{this.getAccountValue(),console.log(t.data),this.message="Succeeded in buying stock",this.dialog=!1})).catch((t=>{this.errors=t,this.message="Failed to buy stock",console.log(this.errors)})).finally((()=>{})),this.dialog=!1,this.snackbar=!0},sell(){this.loginCheck(),this.$router.push("/account")},async loginCheck(){localStorage.getItem("token")?await y().get("/api/isLogin",{headers:{"X-AUTH-TOKEN":"Bearer "+localStorage.getItem("token")}}).then((t=>{localStorage.setItem("tokenVerified",!0),this.isLogin=!0,console.log(this.isLogin)})).catch((t=>{localStorage.setItem("tokenVerified",!1),this.isLogin=!1,this.$router.push("/login"),console.log(t)})):this.$router.push("/login")},getCurrentPrice(){localStorage.getItem("symbol")?localStorage.getItem("symbol")&&y().get("/api/currentPrice/"+localStorage.getItem("symbol")).then((t=>{this.currentPrice=t.data,console.log("price"+t.data),console.log("pricetype"+typeof t.data)})).catch((t=>{this.errors=t,console.log(this.errors),this.isLoading=!1})).finally((()=>{})):y().get("/api/currentPrice/"+this.$store.state.symbol).then((t=>{this.currentPrice=t.data})).catch((t=>{this.errors=t,console.log(this.errors),this.isLoading=!1})).finally((()=>{}))},getAccountValue(){y().get("/api/accountValue/"+this.user_id,{headers:{"X-AUTH-TOKEN":"Bearer "+localStorage.getItem("token")}}).then((t=>{this.setAccountValue(t.data)})).catch((t=>{this.errors=t,console.log(this.errors)})).finally((()=>{}))},...(0,b.OI)({setAccountValue:"SET_ACCOUNTVALUE"})}},k=S,v=s(1001),C=(0,v.Z)(k,f,p,!1,null,null,null),_=C.exports},266:function(t,e,s){s(1884);var a=s(144),o=s(1767),r=s(5352);const l=["sm","md","lg","xl"],n=(()=>l.reduce(((t,e)=>(t[e]={type:[Boolean,String,Number],default:!1},t)),{}))(),i=(()=>l.reduce(((t,e)=>(t["offset"+(0,r.jC)(e)]={type:[String,Number],default:null},t)),{}))(),c=(()=>l.reduce(((t,e)=>(t["order"+(0,r.jC)(e)]={type:[String,Number],default:null},t)),{}))(),u={col:Object.keys(n),offset:Object.keys(i),order:Object.keys(c)};function g(t,e,s){let a=t;if(null!=s&&!1!==s){if(e){const s=e.replace(t,"");a+=`-${s}`}return"col"!==t||""!==s&&!0!==s?(a+=`-${s}`,a.toLowerCase()):a.toLowerCase()}}const d=new Map;e["Z"]=a["default"].extend({name:"v-col",functional:!0,props:{cols:{type:[Boolean,String,Number],default:!1},...n,offset:{type:[String,Number],default:null},...i,order:{type:[String,Number],default:null},...c,alignSelf:{type:String,default:null,validator:t=>["auto","start","end","center","baseline","stretch"].includes(t)},tag:{type:String,default:"div"}},render(t,{props:e,data:s,children:a,parent:r}){let l="";for(const o in e)l+=String(e[o]);let n=d.get(l);if(!n){let t;for(t in n=[],u)u[t].forEach((s=>{const a=e[s],o=g(t,s,a);o&&n.push(o)}));const s=n.some((t=>t.startsWith("col-")));n.push({col:!s||!e.cols,[`col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),d.set(l,n)}return t(e.tag,(0,o.ZP)(s,{class:n}),a)}})},1713:function(t,e,s){s(1884);var a=s(144),o=s(1767),r=s(5352);const l=["sm","md","lg","xl"],n=["start","end","center"];function i(t,e){return l.reduce(((s,a)=>(s[t+(0,r.jC)(a)]=e(),s)),{})}const c=t=>[...n,"baseline","stretch"].includes(t),u=i("align",(()=>({type:String,default:null,validator:c}))),g=t=>[...n,"space-between","space-around"].includes(t),d=i("justify",(()=>({type:String,default:null,validator:g}))),h=t=>[...n,"space-between","space-around","stretch"].includes(t),f=i("alignContent",(()=>({type:String,default:null,validator:h}))),p={align:Object.keys(u),justify:Object.keys(d),alignContent:Object.keys(f)},m={align:"align",justify:"justify",alignContent:"align-content"};function y(t,e,s){let a=m[t];if(null!=s){if(e){const s=e.replace(t,"");a+=`-${s}`}return a+=`-${s}`,a.toLowerCase()}}const b=new Map;e["Z"]=a["default"].extend({name:"v-row",functional:!0,props:{tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:c},...u,justify:{type:String,default:null,validator:g},...d,alignContent:{type:String,default:null,validator:h},...f},render(t,{props:e,data:s,children:a}){let r="";for(const o in e)r+=String(e[o]);let l=b.get(r);if(!l){let t;for(t in l=[],p)p[t].forEach((s=>{const a=e[s],o=y(t,s,a);o&&l.push(o)}));l.push({"no-gutters":e.noGutters,"row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),b.set(r,l)}return t(e.tag,(0,o.ZP)(s,{staticClass:"row",class:l}),a)}})}}]);
//# sourceMappingURL=719.d283ba16.js.map